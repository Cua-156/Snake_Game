#include <raylib.h>
#include <iostream>
#include <filesystem>

using namespace std;

Color green = { 170,200,96,255 };
Color darkGreen = { 40,50,25,255 };

int cellSize = 30;
int cellCount = 25;

class Food {

    public:
        Vector2 pos = { 5,6 }; //Vector with {x, y} used for postion of our food
        Texture2D texture;

        Food() {
            // Print current working directory and check that the file exists so we can debug path issues
            cout << "CWD: " << std::filesystem::current_path().string() << endl;
            const char *path = "Graphics/apple.png";
            cout << "Checking '" << path << "' exists: " << (std::filesystem::exists(path) ? "yes" : "no") << endl;

            // Use LoadTexture which is simpler; check for failure
            texture = LoadTexture(path);
            if (texture.id == 0) {
                cerr << "Failed to load texture '" << path << "'. Make sure the file is copied into the program working directory (typically the build or output folder)." << endl;
            }
        }

        ~Food() {
            UnloadTexture(texture);
        }

        void Draw() {
            //Draw food here
            //DrawCircle(pos.x*cellSize,pos.y*cellSize,cellSize/2,darkGreen);
            DrawTexture(texture, (int)(pos.x * cellSize), (int)(pos.y * cellSize), WHITE);

        }

};

int main() {
    cout << "Opening Snake Game Window..." << endl;

    InitWindow(cellSize*cellCount, cellSize * cellCount, "Snake Game"); //Creates the window for our game
    SetTargetFPS(60); //Sets the target FPS for our game

    Food apple = Food();

    while (WindowShouldClose() == false) { //Game Loop

        BeginDrawing();

        //Drawing screen
        ClearBackground(green);

        apple.Draw();

        EndDrawing();

    }

    CloseWindow(); // Closes the window for our game

    return 0;
}